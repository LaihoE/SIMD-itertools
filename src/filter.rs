/*
use std::simd::cmp::SimdPartialOrd;
use std::simd::i32x8;
use std::simd::Simd;

#[inline(always)]
pub fn filter_simd_inner(a: &[i32], needle: i32, indicies: &mut Vec<i32>) {
    let (prefix, simd_chunk, suffix) = a.as_simd::<8>();
    let prefix_filters = prefix.iter().filter(|x| **x == needle);

    let simd_needle = i32x8::splat(needle);
    let mut simd_idx = 0;
    // SIMD
    for chunk in simd_chunk {
        let x = chunk.simd_lt(simd_needle);
        let bitmask = x.to_bitmask();
        if bitmask != 0 {
            let idxs = MAPPING[bitmask as usize];
            chunk.scatter(&mut indicies[simd_idx..], idxs);
            simd_idx += bitmask.count_ones() as usize;
        }
    }
    let suffix_filters = suffix.iter().filter(|x| **x == needle);
    indicies.extend(prefix_filters.chain(suffix_filters));
    // indicies.into_iter()
}

#[inline(always)]
pub fn filter_simd(a: &[i32], needle: i32) -> impl Iterator<Item = i32> + '_ {
    let mut indicies = vec![];

    filter_simd_inner(a, needle, &mut indicies);

    indicies
        .iter()
        .map(|x| a[*x as usize])
        .collect_vec()
        .into_iter()
}

use std::simd::usizex8;

use itertools::Itertools;
const MAPPING: [usizex8; 511] = [
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 255, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 255, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 255, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 255, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 255, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 255, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 255, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 255, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 0, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 1, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 1, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 2, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 1, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 2, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 2, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 3, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 1, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 2, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 2, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 3, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 2, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 3, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 3, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 4, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 1, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 2, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 2, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 3, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 2, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 3, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 3, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 4, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 2, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 3, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 3, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 4, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 3, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 4, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 4, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 5, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 1, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 2, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 2, 255]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 3, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 2, 255]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 3, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 3, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 4, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 2, 255]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 3, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 3, 255]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 4, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 3, 255]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 4, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 4, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 5, 255]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 2, 255]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 3, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 3, 255]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 4, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 3, 255]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 4, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 4, 255]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 5, 255]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 3, 255]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 4, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 4, 255]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 5, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 4, 255]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 5, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 5, 255]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 6, 255]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 0, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 255, 0]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 255, 1]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 1, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 255, 1]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 2]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 1, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 255, 1]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 2]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 2, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 2]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 3]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 1, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 255, 1]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 255, 2]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 2, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 255, 2]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 255, 3]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 2, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 255, 2]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 255, 3]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 3, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 255, 3]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 255, 4]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 1, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 255, 1]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 255, 2]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 2, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 255, 2]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 255, 3]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 2, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 255, 2]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 255, 3]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 3, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 255, 3]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 255, 4]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 2, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 255, 2]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 255, 3]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 3, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 255, 3]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 255, 4]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 3, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 255, 3]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 255, 4]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 4, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 255, 4]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 255, 5]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 1, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 255, 1]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 255, 2]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 2, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 255, 2]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 255, 3]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 2, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 255, 2]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 255, 3]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 3, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 255, 3]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 255, 4]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 2, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 255, 2]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 255, 3]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 3, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 255, 3]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 255, 4]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 3, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 255, 3]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 255, 4]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 4, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 255, 4]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 255, 5]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 2, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 255, 2]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 255, 3]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 3, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 255, 3]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 255, 4]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 3, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 255, 3]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 255, 4]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 4, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 255, 4]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 255, 5]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 3, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 255, 3]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 255, 4]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 4, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 255, 4]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 255, 5]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 4, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 255, 4]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 255, 5]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 5, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 255, 5]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 255, 6]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 1, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 255, 0, 1]),
    usizex8::from_array([0, 255, 255, 255, 255, 255, 1, 2]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 2, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 255, 1, 2]),
    usizex8::from_array([0, 1, 255, 255, 255, 255, 2, 3]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 2, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 255, 1, 2]),
    usizex8::from_array([0, 255, 1, 255, 255, 255, 2, 3]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 3, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 255, 2, 3]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 3, 4]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 2, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 255, 1, 2]),
    usizex8::from_array([0, 255, 255, 1, 255, 255, 2, 3]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 3, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 255, 2, 3]),
    usizex8::from_array([0, 1, 255, 2, 255, 255, 3, 4]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 3, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 255, 2, 3]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 3, 4]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 4, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 3, 4]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 4, 5]),
    usizex8::from_array([0, 255, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 2, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 255, 1, 2]),
    usizex8::from_array([0, 255, 255, 255, 1, 255, 2, 3]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 3, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 255, 2, 3]),
    usizex8::from_array([0, 1, 255, 255, 2, 255, 3, 4]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 3, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 255, 2, 3]),
    usizex8::from_array([0, 255, 1, 255, 2, 255, 3, 4]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 4, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 255, 3, 4]),
    usizex8::from_array([0, 1, 2, 255, 3, 255, 4, 5]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 3, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 255, 2, 3]),
    usizex8::from_array([0, 255, 255, 1, 2, 255, 3, 4]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 4, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 255, 3, 4]),
    usizex8::from_array([0, 1, 255, 2, 3, 255, 4, 5]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 4, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 3, 4]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 4, 5]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 5, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 4, 5]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 5, 6]),
    usizex8::from_array([0, 1, 2, 255, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 255, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 255, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 2, 255]),
    usizex8::from_array([255, 255, 255, 255, 255, 0, 1, 2]),
    usizex8::from_array([0, 255, 255, 255, 255, 1, 2, 3]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 3, 255]),
    usizex8::from_array([255, 0, 255, 255, 255, 1, 2, 3]),
    usizex8::from_array([0, 1, 255, 255, 255, 2, 3, 4]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 255, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 3, 255]),
    usizex8::from_array([255, 255, 0, 255, 255, 1, 2, 3]),
    usizex8::from_array([0, 255, 1, 255, 255, 2, 3, 4]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 4, 255]),
    usizex8::from_array([255, 0, 1, 255, 255, 2, 3, 4]),
    usizex8::from_array([0, 1, 2, 255, 255, 3, 4, 5]),
    usizex8::from_array([0, 255, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 255, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 3, 255]),
    usizex8::from_array([255, 255, 255, 0, 255, 1, 2, 3]),
    usizex8::from_array([0, 255, 255, 1, 255, 2, 3, 4]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 4, 255]),
    usizex8::from_array([255, 0, 255, 1, 255, 2, 3, 4]),
    usizex8::from_array([0, 1, 255, 2, 255, 3, 4, 5]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 255, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 4, 255]),
    usizex8::from_array([255, 255, 0, 1, 255, 2, 3, 4]),
    usizex8::from_array([0, 255, 1, 2, 255, 3, 4, 5]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 5, 255]),
    usizex8::from_array([255, 0, 1, 2, 255, 3, 4, 5]),
    usizex8::from_array([0, 1, 2, 3, 255, 4, 5, 6]),
    usizex8::from_array([0, 1, 2, 3, 255, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 255, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 255, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 3, 255]),
    usizex8::from_array([255, 255, 255, 255, 0, 1, 2, 3]),
    usizex8::from_array([0, 255, 255, 255, 1, 2, 3, 4]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 4, 255]),
    usizex8::from_array([255, 0, 255, 255, 1, 2, 3, 4]),
    usizex8::from_array([0, 1, 255, 255, 2, 3, 4, 5]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 255, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 4, 255]),
    usizex8::from_array([255, 255, 0, 255, 1, 2, 3, 4]),
    usizex8::from_array([0, 255, 1, 255, 2, 3, 4, 5]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 5, 255]),
    usizex8::from_array([255, 0, 1, 255, 2, 3, 4, 5]),
    usizex8::from_array([0, 1, 2, 255, 3, 4, 5, 6]),
    usizex8::from_array([0, 1, 2, 3, 4, 255, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 255, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 4, 255]),
    usizex8::from_array([255, 255, 255, 0, 1, 2, 3, 4]),
    usizex8::from_array([0, 255, 255, 1, 2, 3, 4, 5]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 5, 255]),
    usizex8::from_array([255, 0, 255, 1, 2, 3, 4, 5]),
    usizex8::from_array([0, 1, 255, 2, 3, 4, 5, 6]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 255, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 5, 255]),
    usizex8::from_array([255, 255, 0, 1, 2, 3, 4, 5]),
    usizex8::from_array([0, 255, 1, 2, 3, 4, 5, 6]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 6, 255]),
    usizex8::from_array([255, 0, 1, 2, 3, 4, 5, 6]),
    usizex8::from_array([0, 1, 2, 3, 4, 5, 6, 7]),
];

#[cfg(test)]
mod tests {
    use crate::filter::filter_simd;

    #[test]
    fn test_filter() {
        for len in 0..100 {
            for _ in 0..100 {
                let mut v1 = vec![0; len];
                for x in v1.iter_mut() {
                    *x = rand::random()
                }
                let mut v2 = vec![0; len];
                for x in v2.iter_mut() {
                    *x = rand::random()
                }
                let correct = filter_simd(&v1, 5);
                let ans = filter(&v1, 5);
                assert_eq!(ans, correct);
            }
        }
    }
}
*/
